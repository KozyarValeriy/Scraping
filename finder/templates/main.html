<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Поиск</title>
  <link type="text/css" rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
  <link rel="shortcut icon" href="{{ url_for('static', filename='images/favicon.ico') }}" type="image/x-icon">
</head>
<body>
  <h1>Поиск на страницах сайта "<a class='match_link' href={{search_url}} target="_blank">{{search_url}}</a>"</h1>
  <div class="main_content">
    {# <p>{{ get_flashed_messages() }}</p> #}
    <form action="" method="post">
      <p>
        {{ form.csrf_token() }}
        {{ form.search(id="main_input", type="text", autocomplete="off",
                       placeholder="Введите слово для поиска") }}
        {{ form.submit(id="button_sub", tabindex="0") }}
      </p>
    </form>
  </div>
  {% if result %}
  <div class="result_content">
    <h3>Результаты поиска "{{form.search.data}}" (всего совпадений: {{count}}):</h3>
    {% for url in urls %}
      <div class="match">
        <div>
          {% for link in url.path %}
            {% if loop.first %}
              <b><a class='match_link' href={{link[0]}} target="_blank">{{link[1]}}</a></b>
            {% else %}
              <a class='match_link' href={{link[0]}} target="_blank">{{link[1]}}</a>
            {% endif %}
            {% if not loop.last %}
              <span class='match_link'>➢</span>
            {% endif %}
          {% endfor %}
        </div>
        <div class="url_body">
          <p>{{url.body_first}} <span class='word_match'>{{url.word}}</span> {{url.body_last}}</p>
        </div>
      </div>
    {% else %}
    {% endfor %}
  </div>
  {% endif %}
<footer>Разработал: Козяр В. Н.</footer>
</body>
</html>